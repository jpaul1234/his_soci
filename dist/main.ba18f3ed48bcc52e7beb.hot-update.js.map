{"version":3,"file":"main.ba18f3ed48bcc52e7beb.hot-update.js","sources":["/home/mickie/development/his_soci/src/components/forms/form.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { combineReducers, createStore } from 'redux';\nimport { Provider } from 'react-redux';\n\nimport { Actions, jsonformsReducer, createAjv, getData, getDefaultData } from '@jsonforms/core';\nimport { materialCells, materialRenderers } from '@jsonforms/material-renderers';\nimport { JsonFormsDispatch,JsonFormsReduxContext, } from '@jsonforms/react';\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport createStyles from \"@material-ui/core/styles/createStyles\";\n\n// Custom JSONforms controls\nimport RatingControl, { RatingControlTester } from './customRatingControl';\nimport customInputFileControl, { customInputFileControlTester } from './customFileControl';\nimport customInputControl, { customInputControlTester } from './customInputControl';\nimport CustomSelectControl, { CustomSelectControlTester } from './customSelectControl';\nimport CustomRadioGroupControl, { CustomRadioGroupControlTester } from './customRadioGroupControl';\nimport CustomGroupRenderer, { CustomGroupRendererTester } from './customGroupRenderer';\nimport cMaterialArrayLayoutRenderer, { cMaterialArrayLayoutRendererTester } from './materialArrayLayoutRenderer';\n\nconst styles = createStyles({\n  container: {\n    padding: '1em'\n  },\n});\nconst saveFormData = (state) => {\n  let jsonFormState = state.getState();\n  console.log(\"state\",jsonFormState);\n  return { data: getData(jsonFormState),defaultData: getDefaultData(jsonFormState),errors: jsonFormState.jsonforms.core.errors,core:jsonFormState.jsonforms,schema:jsonFormState.jsonforms.core.schema,uischema:jsonFormState.jsonforms.core.uischema };\n};\n// create store for the form\nconst store = createStore(\n  combineReducers(\n     { jsonforms: jsonformsReducer() }),\n     {\n       jsonforms: {\n         renderers: materialRenderers,\n         cells: materialCells\n       }\n     }\n);\nconst ajv = createAjv({\n  useDefaults: true\n});\n\nclass HisJsonForm extends Component {\n  state={\n    title: this.props.title,\n    data:this.props.data || {},\n    schema: this.props.schema,\n    uiSchema: this.props.uiSchema,\n    getSubmittedData: this.props.getSubmittedData,\n\n  }\n  componentDidMount(){\n  }\n  render() {\n    const { title,schema,uiSchema,getSubmittedData} = this.state;\n    store.dispatch(Actions.init(this.props.data, schema, uiSchema,ajv));\n    store.dispatch(Actions.registerRenderer(RatingControlTester, RatingControl));\n    store.dispatch(Actions.registerRenderer(customInputControlTester, customInputControl));\n    store.dispatch(Actions.registerRenderer(CustomSelectControlTester, CustomSelectControl));\n    store.dispatch(Actions.registerRenderer(CustomRadioGroupControlTester, CustomRadioGroupControl));\n    store.dispatch(Actions.registerRenderer(customInputFileControlTester, customInputFileControl));\n    store.dispatch(Actions.registerRenderer(CustomGroupRendererTester,CustomGroupRenderer));\n    store.dispatch(Actions.registerRenderer(cMaterialArrayLayoutRendererTester,cMaterialArrayLayoutRenderer));\n    return(\n      <Provider store={store}>\n      <JsonFormsReduxContext>\n        <div>\n           {/* other markup... */}\n           <h3>{ title }</h3>\n           <JsonFormsDispatch onChange={\n             ()=>{\n               getSubmittedData(saveFormData(store))\n             }\n           }\n          />\n        </div>\n      </JsonFormsReduxContext>\n\n      </Provider>\n    );\n  }\n}\nexport default withStyles(styles)(HisJsonForm);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AADA;AADA;AACA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAEA;AACA;AACA;AAFA;AADA;AAOA;AACA;AADA;AACA;AAGA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AADA;AACA;AAQA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AAvCA;AACA;AAuCA;;;;A","sourceRoot":""}